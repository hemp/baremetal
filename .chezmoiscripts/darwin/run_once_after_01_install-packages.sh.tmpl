#!/bin/zsh

source $HOME/.oh-my-zsh/oh-my-zsh.sh
if [[ $(uname -m) == 'arm64' ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
else
  eval "$(/usr/local/bin/brew shellenv)"
fi

# Brewfile hash: {{ include "dot_config/homebrew/Brewfile" | sha256sum }}
echo "HOMEBREW_BUNDLE_FILE: ${XDG_CONFIG_HOME}/homebrew/Brewfile"
brew bundle install --global
# https://gist.github.com/davidteren/898f2dcccd42d9f8680ec69a3a5d350e
brew search '/font-.*-(nerd-font|nf)/' | awk '{ print $1 }' | xargs brew install || true
brew cleanup

$HOME/.iterm2-color-schemes/tools/import-scheme.sh 'Tomorrow Night Bright'

# Remove binary used on fresh first install and defer to the version from: `brew install chezmoi`
rm -f $HOME/bin/chezmoi

# remove GateKeeper
# xattr -c -r /Applications/Alacritty.app
# xattr -c -r /Applications/iTerm.app
# xattr -c -r /Applications/Spotify.app
# xattr -c -r /Applications/WezTerm.app

mise install

# lunarvim:
# https://www.lunarvim.org/docs/installation
# Have git, make, pip, python, npm, node, cargo and ripgrep installed on your system.
bash <(curl -s https://raw.githubusercontent.com/lunarvim/lunarvim/master/utils/installer/install.sh)
